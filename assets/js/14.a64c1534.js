(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{339:function(t,_,v){"use strict";v.r(_);var a=v(33),s=Object(a.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"从输入url到页面加载完成究竟发生了什么？"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#从输入url到页面加载完成究竟发生了什么？"}},[t._v("#")]),t._v(" 从输入url到页面加载完成究竟发生了什么？")]),t._v(" "),v("p",[t._v("先说一下大致流程。")]),t._v(" "),v("ol",[v("li",[v("p",[t._v("浏览器的地址栏输入URL并按下回车。")])]),t._v(" "),v("li",[v("p",[t._v("浏览器查找当前URL是否存在缓存，并比较缓存是否过期。")])]),t._v(" "),v("li",[v("p",[t._v("DNS解析URL对应的IP。")])]),t._v(" "),v("li",[v("p",[t._v("根据IP建立TCP连接（三次握手）。")])]),t._v(" "),v("li",[v("p",[t._v("HTTP发起请求。")])]),t._v(" "),v("li",[v("p",[t._v("服务器处理请求，浏览器接收HTTP响应。")])]),t._v(" "),v("li",[v("p",[t._v("渲染页面，构建DOM树。")])]),t._v(" "),v("li",[v("p",[t._v("关闭TCP连接（四次挥手）。")])])]),t._v(" "),v("p",[t._v("接下来对于关键点进行较详细的讲解。")]),t._v(" "),v("h2",{attrs:{id:"url是什么"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#url是什么"}},[t._v("#")]),t._v(" URL是什么")]),t._v(" "),v("p",[t._v("简单来说就是网页的一个标识，一个IP的映射。当我们浏览网页的时候，常常需要一个URL地址来访问网页，比如http://www.baidu.com,这由三部分组成：协议名、域名、端口号，由于端口号这边是默认的所以隐藏，比如HTTP默认端口80，HTTPS默认端口443。除此之外URL还会包含一些路径、查询和其他片段，例如：http://www.tuicool.com/search?kw=%E4%。我们最常见的的协议是HTTP协议，除此之外还有加密的HTTPS协议、FTP协议、FILe协议等等。URL的中间部分为域名或者是IP。")]),t._v(" "),v("p",[t._v("扩展："),v("RouterLink",{attrs:{to:"/student/aboutBrowser/2.html"}},[t._v("同源策略和跨域")])],1),t._v(" "),v("h2",{attrs:{id:"dns域名解析"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#dns域名解析"}},[t._v("#")]),t._v(" DNS域名解析")]),t._v(" "),v("p",[t._v("因为域名并不是最后资源所存在的真实位置，其只是一个IP的映射。而域名解析的过程实际上就是将域名解析为IP的过程。这个过程如下所示")]),t._v(" "),v("p",[t._v("浏览器会首先搜索浏览器自身的DNS缓存（缓存时间比较短，大概只有2分钟左右，且只能容纳1000条缓存）。")]),t._v(" "),v("p",[t._v("如果浏览器自身缓存找不到则会查看系统的DNS缓存,如果找到且没有过期则停止搜索解析到此结束.")]),t._v(" "),v("p",[t._v("而如果本机没有找到DNS缓存，则浏览器会发起一个DNS的系统调用，就会向本地配置的首选DNS服务器发起域名解析请求（通过的是UDP协议向DNS的53端口发起请求，这个请求是递归的请求，也就是运营商的DNS服务器必须得提供给我们该域名的IP地址），运营商的DNS服务器首先查找自身的缓存，找到对应的条目，且没有过期，则解析成功。")]),t._v(" "),v("p",[t._v("如果没有找到对应的条目，则有运营商的DNS代我们的浏览器发起迭代DNS解析请求，它首先是会找根域的DNS的IP地址（这个DNS服务器都内置13台根域的DNS的IP地址），找打根域的DNS地址，就会向其发起请求（请问www.xxxx.com这个域名的IP地址是多少啊？）")]),t._v(" "),v("p",[t._v("根域发现这是一个顶级域com域的一个域名，于是就告诉运营商的DNS我不知道这个域名的IP地址，但是我知道com域的IP地址，你去找它去，于是运营商的DNS就得到了com域的IP地址，又向com域的IP地址发起了请求（请问www.xxxx.com这个域名的IP地址是多少?）,com域这台服务器告诉运营商的DNS我不知道www.xxxx.com这个域名的IP地址，但是我知道xxxx.com这个域的DNS地址，你去找它去，于是运营商的DNS又向linux178.com这个域名的DNS地址（这个一般就是由域名注册商提供的，像万网，新网等）发起请求（请问www.xxxx.com这个域名的IP地址是多少？），这个时候xxxx.com域的DNS服务器一查，诶，果真在我这里，于是就把找到的结果发送给运营商的DNS服务器，这个时候运营商的DNS服务器就拿到了www.xxxx.com这个域名对应的IP地址，并返回给Windows系统内核，内核又把结果返回给浏览器，终于浏览器拿到了www.xxxx.com对应的IP地址,这次dns解析圆满成功。")]),t._v(" "),v("h2",{attrs:{id:"tcp连接"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#tcp连接"}},[t._v("#")]),t._v(" TCP连接")]),t._v(" "),v("p",[t._v("在通过第一步的域名解析以后，获取到了服务器的IP地址，在获取到IP地址以后，便会开始建立连接。这个过程由TCP协议完成。")]),t._v(" "),v("p",[t._v("主要分为3步，也叫做3次握手。")]),t._v(" "),v("p",[t._v("第一次握手： 建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认")]),t._v(" "),v("p",[t._v("第二次握手： 服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态")]),t._v(" "),v("p",[t._v("第三次握手： 客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。")]),t._v(" "),v("p",[t._v("完成连接以后，客户端和服务端开始传送数据。")]),t._v(" "),v("h2",{attrs:{id:"http请求"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http请求"}},[t._v("#")]),t._v(" http请求")]),t._v(" "),v("p",[t._v("关于这一块在"),v("RouterLink",{attrs:{to:"/student/aboutBrowser/4.html"}},[t._v("http请求协议相关")]),t._v("讲解")],1),t._v(" "),v("h2",{attrs:{id:"浏览器渲染"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染"}},[t._v("#")]),t._v(" 浏览器渲染")]),t._v(" "),v("p",[t._v("这一块知识内容较多，放在"),v("RouterLink",{attrs:{to:"/student/aboutBrowser/5.html"}},[t._v("这里")]),t._v("讲解")],1),t._v(" "),v("h2",{attrs:{id:"四次挥手关闭连接"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四次挥手关闭连接"}},[t._v("#")]),t._v(" 四次挥手关闭连接")])])}),[],!1,null,null,null);_.default=s.exports}}]);