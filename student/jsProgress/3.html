<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>原型与原型链 | cc的学习笔记</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="我的博客">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/myblog/assets/css/0.styles.3e211e95.css" as="style"><link rel="preload" href="/myblog/assets/js/app.41615b56.js" as="script"><link rel="preload" href="/myblog/assets/js/2.814e5817.js" as="script"><link rel="preload" href="/myblog/assets/js/21.89da595b.js" as="script"><link rel="prefetch" href="/myblog/assets/js/10.ca316200.js"><link rel="prefetch" href="/myblog/assets/js/11.d8631f6b.js"><link rel="prefetch" href="/myblog/assets/js/12.a488b497.js"><link rel="prefetch" href="/myblog/assets/js/13.3cc6a402.js"><link rel="prefetch" href="/myblog/assets/js/14.c9a0d417.js"><link rel="prefetch" href="/myblog/assets/js/15.475a2b37.js"><link rel="prefetch" href="/myblog/assets/js/16.8a9137fb.js"><link rel="prefetch" href="/myblog/assets/js/17.9a7498ec.js"><link rel="prefetch" href="/myblog/assets/js/18.b5be574f.js"><link rel="prefetch" href="/myblog/assets/js/19.597126ba.js"><link rel="prefetch" href="/myblog/assets/js/20.839a0cd8.js"><link rel="prefetch" href="/myblog/assets/js/22.90439cc7.js"><link rel="prefetch" href="/myblog/assets/js/23.ae6ca502.js"><link rel="prefetch" href="/myblog/assets/js/24.aaa25a26.js"><link rel="prefetch" href="/myblog/assets/js/25.18fef18d.js"><link rel="prefetch" href="/myblog/assets/js/26.d7948f7a.js"><link rel="prefetch" href="/myblog/assets/js/3.e7373026.js"><link rel="prefetch" href="/myblog/assets/js/4.3743e7be.js"><link rel="prefetch" href="/myblog/assets/js/5.f5e1ad52.js"><link rel="prefetch" href="/myblog/assets/js/6.41cb4bea.js"><link rel="prefetch" href="/myblog/assets/js/7.dd730ae1.js"><link rel="prefetch" href="/myblog/assets/js/8.21240742.js"><link rel="prefetch" href="/myblog/assets/js/9.43ca0555.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.3e211e95.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myblog/" class="home-link router-link-active"><!----> <span class="site-name">cc的学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/student/" class="nav-link router-link-active">
  笔记
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myblog/student/" class="nav-link router-link-active">
  笔记
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/student/jsProgress/1.html" class="sidebar-link">执行上下文相关</a></li><li><a href="/myblog/student/jsProgress/2.html" class="sidebar-link">异步编程</a></li><li><a href="/myblog/student/jsProgress/3.html" class="active sidebar-link">原型与原型链</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>js性能与规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/student/jsPref/1.html" class="sidebar-link">js设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器相关知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/student/aboutBrowser/1.html" class="sidebar-link">从输入url到页面加载完成究竟发生了什么？</a></li><li><a href="/myblog/student/aboutBrowser/2.html" class="sidebar-link">同源策略和跨域</a></li><li><a href="/myblog/student/aboutBrowser/3.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/myblog/student/aboutBrowser/4.html" class="sidebar-link">http请求协议相关</a></li><li><a href="/myblog/student/aboutBrowser/5.html" class="sidebar-link">浏览器渲染原理</a></li><li><a href="/myblog/student/aboutBrowser/sumUp.html" class="sidebar-link">页面性能优化相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/student/webpack/base.html" class="sidebar-link">webpack基本概念</a></li><li><a href="/myblog/student/webpack/1.html" class="sidebar-link">webpack基本配置</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="原型与原型链"><a href="#原型与原型链" class="header-anchor">#</a> 原型与原型链</h1> <p><a href="https://www.jianshu.com/p/dee9f8b14771" target="_blank" rel="noopener noreferrer">参考链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在js中，有一句话叫做万物皆对象。这个对象，分为普通对象和函数对象，那么什么是函数对象呢？凡是通过 new Function() 创建的对象都是函数对象，其他的都是普通对象。比如我们常用的function，还有原生Object、Array等。</p> <p>首先复习一下构造函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">}</span> 
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Zaxlct'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">'Software Engineer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Mick'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Doctor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>在上述例子中，person1和person2都是构造函数Person的一个实例。这两个实例都拥有一个 constructor  属性，该属性指向其构造函数Person，由此我们可以得出一个概念：</p> <p><strong>实例的构造函数属性（constructor）指向构造函数。</strong></p> <p>在JavaScript 中，每当定义一个对象（函数也是对象）时候，对象中都会包含一些预定义的属性。其中每个函数对象，都拥有一个原型对象属性：prototype，指向该函数对象所拥有的的原型对象，同时，不管是函数对象，还是普通对象，都会拥有一个__proto__属性指向该对象的构造函数的原型对象。这句话可能有点绕口，简单来说，上述的person1的__proto__属性指向的是，构造函数的原型对象也就是Person的prototype。那么我们又可以得出一个概念：</p> <p><strong>每个对象都拥有 <strong>proto</strong> 属性，但是只有函数对象拥有prototype</strong></p> <p>接下来我们将关注点放在prototype上，大部分情况下，原型对象其实就是一个普通对象，它也有个constructor指针，会指向自身所归属的那个函数对象，回顾一下第一条概念，<strong>实例的构造函数属性（constructor）指向构造函数。</strong> 那么我们是否可以将原型对象看成是构造函数的一个实例呢？当然可以，那么我们得出以下结论：</p> <p><strong>原型对象（Person.prototype）是 构造函数（Person）的一个实例</strong></p> <p>那么这边问题来了，原生的Function，它的原型对象是普通对象呢还是函数对象呢？答案是：函数对象，同时，它也很特殊，它没有prototype。我相信理解了上面所说的东西这边应该没有什么疑问。</p> <p>那么原型对象是拿来做什么的呢？主要作用用于继承。请看以下代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// tip: 当函数执行时这个 this 指的是谁？</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>  <span class="token comment">// tip: 当函数执行时这个 this 指的是谁？</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person</span><span class="token punctuation">(</span><span class="token string">'Mick'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 person1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Mick</span>
</code></pre></div><p>从这个例子可以看出，通过给 Person.prototype 设置了一个函数对象的属性，那由 Person 的实例（person1）出来的普通对象就继承了这个属性。</p> <p>在这要说一下，js的一个属性查找机制是，会沿着对象的__protp__和prototype进行查找，直到null。这同时也是原型链的一个本质。</p> <p>接下来，我们再详细说一下，Function.prototype，前面说过，它是一个函数对象，那么它的__proto__属性指向哪里呢？根据前面所学的知识，你可能会说，它指向自身，然而，实际上，它指向的是Object.prototype，你不用特意去纠结为什么，就像你不用纠结先有鸡还是先有蛋一样，如果一定想知道，那么你可以认为，原型链要有一个终点，如果它指向自身，不就无限循环了吗？</p> <p>最后，Object.prototype的proto是谁？答案是，null，也就是，原型链的终点。</p> <p>让我们来总结一下：</p> <ul><li><p>每个对象都拥有 <strong>proto</strong> 属性，但是只有函数对象拥有prototype</p></li> <li><p>每个实例都拥有constructor，同时原型对象也有</p></li> <li><p>在正常情况下原型对象就是普通对象，但是Function是特殊的，因为，将原型对象看成构造函数的实例的话，那么Function的原型对象是，new Function</p></li> <li><p>尽管Function的prototype是函数对象，但是这个函数对象的__proto__指向的却是Object.prototype</p></li> <li><p>Object.prototype.<strong>proto</strong>  === null，你可以理解为，万物皆有头</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/myblog/student/jsProgress/2.html" class="prev">
        异步编程
      </a></span> <span class="next"><a href="/myblog/student/jsPref/1.html">
        js设计模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/myblog/assets/js/app.41615b56.js" defer></script><script src="/myblog/assets/js/2.814e5817.js" defer></script><script src="/myblog/assets/js/21.89da595b.js" defer></script>
  </body>
</html>
